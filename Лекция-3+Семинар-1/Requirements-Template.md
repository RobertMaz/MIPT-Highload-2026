# Шаблон документа требований

> Скопируйте этот файл в `docs/requirements.md` вашего репозитория и заполните.
> Удалите примеры и подсказки — оставьте только ваши данные.

---

# Requirements Document: [Название системы]

## 1. Функциональные требования (ФТ)

> 5–7 ключевых требований. Формулируйте кратко и однозначно.

```
ФТ-001: [Описание]
ФТ-002: [Описание]
ФТ-003: ...
```

---

## 2. Нефункциональные требования (НФТ)

> Для каждого НФТ — конкретная метрика (SLI + SLO) и оценка архитектурной значимости.
> Покройте: Latency, Throughput, Availability, Durability, Scalability.

### НФТ-001: [Название, например "Задержка (Latency)"]

SLI (что измеряем): [например "p99 задержка POST /api/order"]
SLO (целевое значение): [например "< 500ms"]

Оценка архитектурной значимости:

- Влияние на структуру (Impact): High/Medium/Low — [почему]
- Стоимость изменения (Cost of Change): High/Medium/Low — [почему]
- Бизнес-риск (Business Risk): High/Medium/Low — [почему]

Архитектурно-значимый: Да/Нет (2+ из 3 = High?)

> Добавляйте НФТ по аналогии.

---

## 3. Расчёт нагрузки (Capacity Estimation)

> Покажите ход расчётов, не только финальные цифры.

### 3.1 Пользователи

```
MAU: [число]
DAU: [число] (MAU × [коэффициент], обоснование: [...])
Пиковый одновременный онлайн: [число] (обоснование: [...])
```

### 3.2 RPS

Соотношение чтение/запись: [например "90/10"]

```
Средний RPS = DAU × Req/user / 86400
            = [число] × [число] / 86400
            = [результат] RPS

Peak RPS    = (DAU × Req/user × Peak_coef) / (Peak_hours × 3600)
            = ([число] × [число] × [число]) / ([число] × 3600)
            = [результат] RPS
```

Пиковый сценарий: [например "обеденный пик", "день зарплаты"]

### 3.3 Бюджет задержки (Latency Budget)

Endpoint: [например "POST /api/order"]
SLO: [например "p99 < 500ms"]

| Компонент      | Задержка (мс) | Комментарий       |
|----------------|---------------|-------------------|
| [компонент 1]  | [число]       | [источник оценки] |
| [компонент 2]  | [число]       |                   |
| [компонент 3]  | [число]       |                   |
| ИТОГО          | [сумма]       |                   |
| Буфер (30%)    | [число]       |                   |
| С БУФЕРОМ      | [сумма]       |                   |
| Остаток от SLO | [SLO − сумма] | ✅ / ❌             |

Узкое место (Bottleneck): [какой компонент доминирует и что с этим делать]

### 3.4 Хранилище (Storage)

Формула:

```
Storage = записей/день × размер_записи × дней × коэффициент_репликации
```

Пример расчёта (доставка еды):

```
Заказы:
  100K DAU × 1.5 заказа/день × 2 KB/заказ = 300 MB/день
  × 365 = ~110 GB/год
  × 3 (репликация) = ~330 GB/год

Фото меню:
  50K ресторанов × 20 блюд × 500 KB/фото = 500 GB (единовременно)
  Обновление ~5%/мес = 25 GB/мес
```

| Тип данных | Объём через 1 год | Объём через 3 года | Комментарий |
|------------|-------------------|--------------------|-------------|
| [тип]      | [объём]           | [объём]            |             |

### 3.5 Bandwidth

Формулы:

```
Входящий  = Peak_RPS × avg_request_size
Исходящий = Peak_RPS × avg_response_size
```

Пример:

```
Входящий:  5K RPS × 2 KB  = 10 MB/s = 80 Mbps
Исходящий: 5K RPS × 50 KB = 250 MB/s = 2 Gbps
```

---

## 4. Допущения, ограничения и открытые вопросы

### Допущения

> Что вы приняли как данность без подтверждения заказчика.

1. [Допущение 1]
2. [Допущение 2]

### Ограничения

> Бюджет, технологии, команда, сроки — всё, что влияет на решения.

1. [Ограничение 1]
2. [Ограничение 2]

### Открытые вопросы

> Что нужно уточнить у заказчика перед началом проектирования.

1. [Вопрос 1]
2. [Вопрос 2]

### Выявленные противоречия

> Какие требования заказчика конфликтуют друг с другом и как вы предлагаете их разрешить.

1. [Противоречие 1] → [предлагаемое решение]
2. [Противоречие 2] → [предлагаемое решение]
