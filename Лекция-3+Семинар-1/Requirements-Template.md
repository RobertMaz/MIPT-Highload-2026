# Шаблон документа требований

> Шаблон для документирования требований к highload-системе

---

# Requirements Document: [Название системы]

## 1. Бизнес-цели

**Домен:** [например "Финтех / Платёжный процессинг"]
**Бизнес-модель:** B2C / B2B / B2B2C
**Целевая аудитория:** [кто пользователи, сколько их]
**Регионы:** [например "РФ, СНГ" или "Global"]

**Главная цель:**

- [Описание бизнес-цели]

**Ключевые метрики:**

- [Метрика 1, например "1M активных пользователей через 1 год"]
- [Метрика 2, например "$10M revenue через 6 месяцев"]

---

## 2. Функциональные требования (ФТ)

### ФТ-001: [Название функции]

**Приоритет:** High / Medium / Low

**Описание:**

- Как [роль], я хочу [действие], чтобы [цель/выгода]

**Критерии приёмки:**

- [ ] Критерий 1
- [ ] Критерий 2

---

## 3. Нефункциональные требования (НФТ)

### НФТ-001: [Название, например "Производительность — задержка (Latency)"]

**SLI (что измеряем):** [например "p95 задержка GET /api/products"]
**SLO (целевое значение):** [например "< 200ms при 10K concurrent users"]

**Оценка архитектурной значимости:**

- **Влияние на структуру (Impact):** High/Medium/Low — [почему]
- **Стоимость изменения (Cost of Change):** High/Medium/Low — [почему]
- **Бизнес-риск (Business Risk):** High/Medium/Low — [почему]

**Архитектурно-значимый:** Да/Нет (2+ из 3 = High?)

> Добавляйте по аналогии: доступность (Availability), масштабируемость (Scalability), сохранность данных (Durability) и т.д.

---

## 4. Расчёт нагрузки

**Соотношение чтение/запись:** [например "90/10" или "60/40"]

**Текущее состояние:**

- DAU: [число]
- Средний RPS: [расчёт]

### Пиковый сценарий: [Название, например "День зарплаты"]

**Дано:**

- Пиковый DAU: [число]
- Запросов на пользователя: [число]
- Пиковый коэффициент: [число]x
- Пиковые часы: [часы]

**Расчёт пикового RPS:**

```
Peak RPS = (DAU × Req/user × Peak_coef) / (Peak_hours × 3600)
         = ([DAU] × [req] × [coef]) / ([hours] × 3600)
         = [результат] RPS
```

### Бюджет задержки (Latency Budget)

**Endpoint:** [например "POST /api/transfer"]
**SLO:** [например "p95 < 500ms"]

| Компонент              | Задержка (мс)        | Комментарий       |
|------------------------|----------------------|-------------------|
| [компонент 1]          | [число]              | [источник оценки] |
| [компонент 2]          | [число]              |                   |
| [компонент 3]          | [число]              |                   |
| **ИТОГО**              | **[сумма]**          |                   |
| **Буфер (30%)**        | **[число]**          |                   |
| **С БУФЕРОМ**          | **[сумма]**          |                   |
| **Остаток от SLO**     | **[SLO - сумма]**    | ✅ / ❌             |

**Узкое место (Bottleneck):** [какой компонент доминирует и что с этим делать]

---

## 5. Данные и хранилище

**Пример расчёта (доставка еды):**

```
Заказы:
  100K DAU × 1.5 заказа/день × 2 KB/заказ = 300 MB/день
  × 365 = ~110 GB/год
  × 3 (репликация) = ~330 GB/год

Фото меню:
  50K ресторанов × 20 блюд × 500 KB/фото = 500 GB (единовременно)
  Обновление ~5%/мес = 25 GB/мес

Bandwidth:
  Входящий: 5K RPS × 2 KB (avg request) = 10 MB/s = 80 Mbps
  Исходящий: 5K RPS × 50 KB (avg response с превью) = 250 MB/s = 2 Gbps
```

| Тип данных | Текущий объём | Прирост | Консистентность | Комментарий |
|------------|---------------|---------|-----------------|-------------|
| [тип]      | [объём]       | [/день] | Strong/Eventual | [почему]    |

**Формулы:**

```
Storage = записей/день × размер_записи × дней × коэффициент_репликации
Bandwidth_in  = Peak_RPS × avg_request_size
Bandwidth_out = Peak_RPS × avg_response_size
```

---

## 6. Допущения

**Что предполагаем:**

1. [Предположение 1]
2. [Предположение 2]

**Что нужно уточнить у заказчика:**

1. [Вопрос 1]
2. [Вопрос 2]

---

## 7. Риски

| Тип          | Риск                           | Вероятность     | Влияние         | Митигация                      |
|--------------|--------------------------------|-----------------|-----------------|--------------------------------|
| Технический  | [например "единая точка отказа"] | High/Medium/Low | High/Medium/Low | [например "репликация, балансировщик"] |
| Операционный | [например "нет отката"]        | High/Medium/Low | High/Medium/Low | [например "blue-green deploy"] |
