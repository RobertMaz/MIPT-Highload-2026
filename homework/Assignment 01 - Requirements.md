# Задание 1: Анализ требований

**Выдача:** 20.02
**Дедлайн:** 06.03
**Формат сдачи:** Markdown-документ в репозитории команды
**Команда:** 4–5 человек

---

## О проекте

Все 4 задания курса — это **фазы одного сквозного проекта**. Вы проектируете highload-систему от требований до эксплуатации.

### Структура репозитория

Заведите **один репозиторий** на команду. Он будет использоваться во всех 4 заданиях.

```
├── docs/
│   ├── requirements.md       # ДЗ 1
│   ├── architecture.md       # ДЗ 2
│   ├── adr/                  # ДЗ 2 — Architecture Decision Records
│   ├── diagrams/             # C4, sequence, deployment
│   ├── load-test-results.md  # ДЗ 3
│   └── operations.md         # ДЗ 4
├── services/                 # ДЗ 3 — код сервисов
├── k6/                       # ДЗ 3 — сценарии нагрузочного тестирования
├── docker-compose.yml        # ДЗ 3
├── presentation/             # ДЗ 4 — слайды для защиты
└── README.md                 # Описание проекта, как запустить
```

### Выбор кейса

Выберите один из предложенных кейсов (или предложите свой — с утверждением преподавателя):

**Кейс A: Сервис доставки еды (a la Яндекс.Еда)**

- Каталог ресторанов и меню
- Оформление и оплата заказов
- Отслеживание статуса доставки в реальном времени
- Уведомления (push/sms)

> Вводные от заказчика: *«Система должна выдерживать обеденный пик. Оплата — самое важное, ничего не должно теряться. Но скорость оформления
тоже критична — клиенты уходят, если ждут больше пары секунд.»*

**Кейс B: Маркетплейс объявлений (a la Avito)**

- Создание и поиск объявлений (с фильтрами и полнотекстовым поиском)
- Загрузка фото к объявлениям
- Модерация контента (автоматическая + ручная)
- Платное продвижение объявлений
- Уведомления о новых объявлениях по подписке

> Вводные от заказчика: *«Поиск должен работать мгновенно — это главная страница. Но объявления должны проходить модерацию перед
публикацией. И мы не можем терять платежи за продвижение, даже если модерация тормозит.»*

**Кейс C: Система бронирования жилья (a la Booking)**

- Каталог объектов с фильтрами и поиском
- Проверка доступности и бронирование с оплатой
- Отмена бронирования с возвратом средств
- Уведомления хозяевам и гостям
- Отзывы и рейтинги

> Вводные от заказчика: *«Два человека не должны забронировать один и тот же объект на одни и те же даты. Но страница поиска должна быть
быстрой — люди сравнивают десятки вариантов. И нам нужна 100% надёжность платежей.»*

---

## Контекст

Заказчик описал задачу в общих чертах (см. кейс). Ваша задача — превратить расплывчатые пожелания в структурированные требования. Заказчик
недоступен — фиксируйте допущения и обосновывайте.

Вводные от заказчика (для всех кейсов):

- Ожидаемая аудитория: **5–20 млн пользователей в месяц**
- Регион: Россия + СНГ
- Инфраструктура: облако, бюджет ограничен
- «Система должна работать быстро и не падать»

Обратите внимание: часть требований заказчика **противоречива**. Это нормальная ситуация — ваша задача выявить противоречия, зафиксировать
их и предложить способ разрешения.

---

## Задание

### Часть 1: Функциональные требования (ФТ)

Опишите **5–7** ключевых функциональных требований.

**Формат:**

```
ФТ-001: Пользователь может найти ресторан по названию, кухне или расстоянию
ФТ-002: Пользователь может оформить заказ и оплатить его онлайн
ФТ-003: ...
```

### Часть 2: Нефункциональные требования (НФТ)

Для каждого НФТ укажите **конкретные числовые метрики**.

**Пример:**

```
НФТ-001: Задержка (Latency)
- Оформление заказа: p99 < 500ms
- Поиск ресторанов: p99 < 200ms
- Обновление статуса: p99 < 100ms

НФТ-002: Доступность (Availability)
- Оплата: 99.99%
- Каталог: 99.9%
- Уведомления: 99.5%
```

**Покройте:**

- Задержка / Latency (p50, p99)
- Пропускная способность / Throughput (RPS)
- Доступность / Availability (%)
- Сохранность данных / Durability (данные не теряются)
- Масштабируемость / Scalability (ожидаемый рост)

### Часть 3: Оценка нагрузки (Capacity Estimation)

Оцените нагрузку **с расчётами** (back-of-envelope):

1. **Пользователи:** MAU → DAU → пиковый одновременный онлайн
2. **RPS:** средний и пиковый (по операциям)
3. **Бюджет задержки (Latency Budget):** для 1 критичного сценария (например, оформление заказа или поиск) — разложите SLO на компоненты
4. **Хранилище:** объём данных через 1 год, через 3 года
5. **Bandwidth:** входящий и исходящий трафик

**Покажите ход расчётов**, не только финальные цифры.

### Часть 4: Допущения, ограничения и открытые вопросы

- **Допущения (assumptions):** что вы приняли как данность без подтверждения заказчика
- **Ограничения:** бюджет, технологии, команда, сроки — всё, что влияет на проектирование
- **Открытые вопросы:** что нужно уточнить перед началом проектирования
- **Выявленные противоречия:** какие требования заказчика конфликтуют и как вы предлагаете их разрешить

---

## Критерии оценки

| Критерий                                                                | Баллы |
|-------------------------------------------------------------------------|-------|
| ФТ полные и непротиворечивые                                            | 2     |
| НФТ с конкретными метриками для каждого атрибута                        | 2     |
| Оценка нагрузки с расчётами (RPS, latency budget, хранилище, bandwidth) | 4     |
| Допущения, ограничения, вопросы и противоречия                          | 2     |

**Максимум:** 10 баллов

---

## Подсказки

- Разные части системы могут иметь разные SLA — не всё одинаково критично
- Подумайте о пиковых нагрузках: время суток, дни недели, события
- Используйте реальные цифры для оценки (размер сообщения, вес страницы, размер записи в БД)
- Зафиксируйте что вы НЕ знаете и что бы спросили у заказчика — это и есть секция "Открытые вопросы"
- Посмотрите Cheatsheet — Latency Numbers для оценок
- Обратите внимание на противоречия во вводных от заказчика — они там специально
- Для latency budget: разложите один критичный путь на компоненты (API Gateway → сервис → БД → внешний API и т.д.), оцените каждый по
  Latency Numbers, найдите bottleneck

## Ресурсы

- DDIA Ch 1 — Reliable, Scalable, Maintainable Applications
- Cheatsheet — Latency Numbers
