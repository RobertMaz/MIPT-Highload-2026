# Peak RPS Calculator

> –ö–∞–∫ —Ä–∞—Å—Å—á–∏—Ç–∞—Ç—å –ø–∏–∫–æ–≤—É—é –Ω–∞–≥—Ä—É–∑–∫—É –¥–ª—è highload —Å–∏—Å—Ç–µ–º—ã
>
> –í—Ä–µ–º—è: 5 –º–∏–Ω—É—Ç

---

## –ë–∞–∑–æ–≤–∞—è —Ñ–æ—Ä–º—É–ª–∞

```
Peak RPS = (DAU √ó Requests_per_user √ó Peak_coefficient) / (Peak_hours √ó 3600)
```

**–ì–¥–µ:**
- **DAU** = Daily Active Users (–∞–∫—Ç–∏–≤–Ω—ã—Ö –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª–µ–π –≤ –¥–µ–Ω—å)
- **Requests_per_user** = —Å–∫–æ–ª—å–∫–æ –∑–∞–ø—Ä–æ—Å–æ–≤ –¥–µ–ª–∞–µ—Ç 1 –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—å –≤ –¥–µ–Ω—å
- **Peak_coefficient** = –≤–æ —Å–∫–æ–ª—å–∫–æ —Ä–∞–∑ –ø–∏–∫ –≤—ã—à–µ —Å—Ä–µ–¥–Ω–µ–≥–æ (–æ–±—ã—á–Ω–æ 2-10x)
- **Peak_hours** = –¥–ª–∏—Ç–µ–ª—å–Ω–æ—Å—Ç—å –ø–∏–∫–∞ –≤ —á–∞—Å–∞—Ö
- **3600** = —Å–µ–∫—É–Ω–¥ –≤ —á–∞—Å–µ

---

## –ü—Ä–∏–º–µ—Ä 1: –ò–Ω—Ç–µ—Ä–Ω–µ—Ç-–±–∞–Ω–∫ (–ø—Ä–æ—Å—Ç–æ–π)

### –î–∞–Ω–æ:
- 50,000 –∫–ª–∏–µ–Ω—Ç–æ–≤ (DAU)
- 5 —Ç—Ä–∞–Ω–∑–∞–∫—Ü–∏–π –Ω–∞ –∫–ª–∏–µ–Ω—Ç–∞ –≤ –¥–µ–Ω—å:
  - –í—Ö–æ–¥ –≤ —Å–∏—Å—Ç–µ–º—É: 1 —Ä–∞–∑
  - –ü—Ä–æ—Å–º–æ—Ç—Ä –±–∞–ª–∞–Ω—Å–∞: 2 —Ä–∞–∑–∞
  - –ü–ª–∞—Ç–µ–∂–∏/–ø–µ—Ä–µ–≤–æ–¥—ã: 2 —Ä–∞–∑–∞
- **–ü–∏–∫:** –∑–∞—Ä–ø–ª–∞—Ç–Ω—ã–µ –¥–Ω–∏ (10-15 —á–∏—Å–ª–æ –º–µ—Å—è—Ü–∞)
- **Peak coefficient:** 3x (–≤—Å–µ –ø–æ–ª—É—á–∏–ª–∏ –∑–∞—Ä–ø–ª–∞—Ç—É ‚Üí –∞–∫—Ç–∏–≤–Ω–æ—Å—Ç—å –≤ 3 —Ä–∞–∑–∞ –≤—ã—à–µ)
- **Peak hours:** 10:00-14:00 = 4 —á–∞—Å–∞ (–æ–±–µ–¥–µ–Ω–Ω–æ–µ –≤—Ä–µ–º—è)

### –†–∞—Å—á–µ—Ç:

```
Average RPS = DAU √ó Requests / 86400
            = 50,000 √ó 5 / 86,400
            = 2.9 RPS (–æ—á–µ–Ω—å –Ω–∏–∑–∫–∞—è —Å—Ä–µ–¥–Ω—è—è)

Peak RPS = (50,000 √ó 5 √ó 3) / (4 √ó 3600)
         = 750,000 / 14,400
         = 52 RPS
```

### –í—ã–≤–æ–¥:

**52 RPS** ‚Äî —ç—Ç–æ LOW –¥–ª—è highload –≤ –∞–±—Å–æ–ª—é—Ç–Ω—ã—Ö —á–∏—Å–ª–∞—Ö.

–ù–û –¥–ª—è –±–∞–Ω–∫–∞ —ç—Ç–æ **–∫—Ä–∏—Ç–∏—á–Ω–∞—è —Å–∏—Å—Ç–µ–º–∞** –∏–∑-–∑–∞:
- Availability requirement: 99.95% (—Ä–µ–≥—É–ª—è—Ç–æ—Ä –¶–ë)
- Latency requirement: < 500ms (UX)
- Security: —Å—Ç—Ä–æ–≥–∏–µ —Ç—Ä–µ–±–æ–≤–∞–Ω–∏—è

**‚Üí Highload = –Ω–µ —Ç–æ–ª—å–∫–æ RPS, –Ω–æ –∏ –Ω–µ—Ñ—É–Ω–∫—Ü–∏–æ–Ω–∞–ª—å–Ω—ã–µ —Ç—Ä–µ–±–æ–≤–∞–Ω–∏—è!**

---

## –ü—Ä–∏–º–µ—Ä 2: E-commerce (–ß–µ—Ä–Ω–∞—è –ü—è—Ç–Ω–∏—Ü–∞)

### –î–∞–Ω–æ:
- 1,000,000 MAU (Monthly Active Users)
- **–í –æ–±—ã—á–Ω—ã–π –¥–µ–Ω—å:** 100K DAU (10% –æ—Ç MAU)
- **–í –ß–µ—Ä–Ω—É—é –ü—è—Ç–Ω–∏—Ü—É:** 500K DAU (50% –æ—Ç MAU!)
- –û–ø–µ—Ä–∞—Ü–∏–∏ –Ω–∞ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è:
  - **Browse** (–∫–∞—Ç–∞–ª–æ–≥, –ø–æ–∏—Å–∫, —Ñ–∏–ª—å—Ç—Ä—ã): 15 requests
  - **Checkout** (–∫–æ—Ä–∑–∏–Ω–∞, –æ—Ñ–æ—Ä–º–ª–µ–Ω–∏–µ, –æ–ø–ª–∞—Ç–∞): 5 requests
  - **–ò—Ç–æ–≥–æ:** 20 requests/user
- **–ü–∏–∫:** 00:00-02:00 (–Ω–∞—á–∞–ª–æ —Ä–∞—Å–ø—Ä–æ–¥–∞–∂–∏)
- **Peak coefficient:** 10x (–≤—Å–µ –æ–¥–Ω–æ–≤—Ä–µ–º–µ–Ω–Ω–æ!)
- **Peak hours:** 2 —á–∞—Å–∞

### –†–∞—Å—á–µ—Ç:

```
–û–±—ã—á–Ω—ã–π –¥–µ–Ω—å:
Average RPS = 100,000 √ó 20 / 86,400 = 23 RPS

–ß–µ—Ä–Ω–∞—è –ü—è—Ç–Ω–∏—Ü–∞:
Peak RPS = (500,000 √ó 20 √ó 10) / (2 √ó 3600)
         = 100,000,000 / 7,200
         = 13,889 RPS
```

### –†–∞–∑–±–∏–≤–∫–∞ –ø–æ —Ç–∏–ø–∞–º –æ–ø–µ—Ä–∞—Ü–∏–π:

**Browse (75% —Ç—Ä–∞—Ñ–∏–∫–∞):**
```
Browse RPS = (500,000 √ó 15 √ó 10) / (2 √ó 3600)
           = 10,417 RPS
```

**Checkout (25% —Ç—Ä–∞—Ñ–∏–∫–∞):**
```
Checkout RPS = (500,000 √ó 5 √ó 10) / (2 √ó 3600)
             = 3,472 RPS
```

### –í—ã–≤–æ–¥:

**~14K RPS** ‚Äî —ç—Ç–æ HIGHLOAD!

–¢—Ä–µ–±–æ–≤–∞–Ω–∏—è:
- Horizontal scaling (–¥–µ—Å—è—Ç–∫–∏/—Å–æ—Ç–Ω–∏ instances)
- CDN –¥–ª—è —Å—Ç–∞—Ç–∏–∫–∏
- Database sharding
- Redis caching
- Auto-scaling –≥–æ—Ç–æ–≤ –∫ 10x spike

---

## –ü—Ä–∏–º–µ—Ä 3: Burst traffic (–±–∏–ª–µ—Ç—ã –Ω–∞ –∫–æ–Ω—Ü–µ—Ä—Ç)

### –î–∞–Ω–æ:
- 100,000 –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª–µ–π –∂–¥—É—Ç —Å—Ç–∞—Ä—Ç–∞ –ø—Ä–æ–¥–∞–∂
- –°—Ç–∞—Ä—Ç: 10:00 —Ä–æ–≤–Ω–æ
- **–ü–µ—Ä–≤—ã–µ 5 –º–∏–Ω—É—Ç:** –≤—Å–µ –ø—ã—Ç–∞—é—Ç—Å—è –∫—É–ø–∏—Ç—å –æ–¥–Ω–æ–≤—Ä–µ–º–µ–Ω–Ω–æ
- **Retry:** –∫–∞–∂–¥—ã–π –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—å –¥–µ–ª–∞–µ—Ç –≤ —Å—Ä–µ–¥–Ω–µ–º 3 –ø–æ–ø—ã—Ç–∫–∏ (–ø–µ—Ä–≤–∞—è –Ω–µ –ø—Ä–æ—Ö–æ–¥–∏—Ç ‚Üí retry)

### –†–∞—Å—á–µ—Ç:

```
–ó–∞–ø—Ä–æ—Å–æ–≤ –∑–∞ 5 –º–∏–Ω—É—Ç = 100,000 users √ó 3 attempts = 300,000 requests

Average RPS (5 –º–∏–Ω) = 300,000 / (5 √ó 60)
                    = 300,000 / 300
                    = 1,000 RPS

–ù–û —Å —É—á–µ—Ç–æ–º retry amplification:
–†–µ–∞–ª—å–Ω—ã–π RPS –º–æ–∂–µ—Ç –±—ã—Ç—å 3,000-5,000 RPS –≤ –ø–µ—Ä–≤—ã–µ 30 —Å–µ–∫—É–Ω–¥! üí•
```

### –í—ã–≤–æ–¥:

**Burst traffic** (–∫–æ—Ä–æ—Ç–∫–∏–π spike) —Å–ª–æ–∂–Ω–µ–µ —á–µ–º sustained load:
- –ù—É–∂–µ–Ω rate limiter (–∏–Ω–∞—á–µ —Å–µ—Ä–≤–µ—Ä —É–ø–∞–¥—ë—Ç)
- Queue —Å–∏—Å—Ç–µ–º–∞ (–æ—á–µ—Ä–µ–¥—å –Ω–∞ –ø–æ–∫—É–ø–∫—É)
- Graceful degradation ("–°–µ—Ä–≤–µ—Ä –ø–µ—Ä–µ–≥—Ä—É–∂–µ–Ω, –ø–æ–ø—Ä–æ–±—É–π—Ç–µ —á–µ—Ä–µ–∑ 1 –º–∏–Ω")

---

## –¢–∏–ø–∏—á–Ω—ã–µ Peak Coefficients

| –¢–∏–ø —Å–∏—Å—Ç–µ–º—ã | Peak Coefficient | –ö–æ–≥–¥–∞ –ø–∏–∫ | Peak Hours |
|-------------|------------------|-----------|------------|
| **–ò–Ω—Ç–µ—Ä–Ω–µ—Ç-–±–∞–Ω–∫** | 2-3x | –ó–∞—Ä–ø–ª–∞—Ç–Ω—ã–µ –¥–Ω–∏ (10-15 —á–∏—Å–ª–æ) | 4 —á–∞—Å–∞ (10:00-14:00) |
| **E-commerce** | 5-10x | –ß–µ—Ä–Ω–∞—è –ü—è—Ç–Ω–∏—Ü–∞, –ù–æ–≤—ã–π –ì–æ–¥ | 2 —á–∞—Å–∞ (00:00-02:00) |
| **–°–æ—Ü—Å–µ—Ç–∏** | 2-4x | –í–µ—á–µ—Ä (19:00-22:00) | 3 —á–∞—Å–∞ |
| **–ù–æ–≤–æ—Å—Ç–∏** | 10-50x | –≠–∫—Å—Ç—Ä–µ–Ω–Ω—ã–µ —Å–æ–±—ã—Ç–∏—è | –ù–µ–ø—Ä–µ–¥—Å–∫–∞–∑—É–µ–º–æ |
| **–¢–∞–∫—Å–∏** | 3-5x | –£—Ç—Ä–æ (8-9), –≤–µ—á–µ—Ä (18-20) | 2 —á–∞—Å–∞ |
| **–ë–∏–ª–µ—Ç—ã** | 100-1000x | –°—Ç–∞—Ä—Ç –ø—Ä–æ–¥–∞–∂ (—Å–µ–∫—É–Ω–¥—ã!) | 5-10 –º–∏–Ω—É—Ç |
| **–°—Ç—Ä–∏–º–∏–Ω–≥** | 5-10x | –ü—Ä–µ–º—å–µ—Ä–∞ —Å–µ—Ä–∏–∞–ª–∞/–º–∞—Ç—á | 2-3 —á–∞—Å–∞ |

---

## –ß–∞—Å—Ç—ã–µ –æ—à–∏–±–∫–∏

### ‚ùå –û—à–∏–±–∫–∞ #1: –ó–∞–±—ã–ª–∏ –ø—Ä–æ –ø–∏–∫–æ–≤—ã–π –∫–æ—ç—Ñ—Ñ–∏—Ü–∏–µ–Ω—Ç

```
Wrong: RPS = (DAU √ó Requests) / 86,400
‚Üí –≠—Ç–æ –°–†–ï–î–ù–ò–ô RPS –∑–∞ –≤–µ—Å—å –¥–µ–Ω—å, –Ω–µ –ø–∏–∫–æ–≤—ã–π!
```

**–†–µ—à–µ–Ω–∏–µ:** –í—Å–µ–≥–¥–∞ —É—á–∏—Ç—ã–≤–∞–π—Ç–µ peak coefficient (–º–∏–Ω–∏–º—É–º 2x).

### ‚ùå –û—à–∏–±–∫–∞ #2: –ù–µ —Ä–∞–∑–±–∏–ª–∏ –ø–æ —Ç–∏–ø–∞–º –æ–ø–µ—Ä–∞—Ü–∏–π

E-commerce:
- Browse: read-heavy, –º–æ–∂–Ω–æ –∫—ç—à–∏—Ä–æ–≤–∞—Ç—å ‚Üí –¥–µ—à–µ–≤–æ
- Checkout: write-heavy, —Ç—Ä–∞–Ω–∑–∞–∫—Ü–∏–∏ ‚Üí –¥–æ—Ä–æ–≥–æ

**–†–µ—à–µ–Ω–∏–µ:** –°—á–∏—Ç–∞–π—Ç–µ –æ—Ç–¥–µ–ª—å–Ω–æ browse RPS –∏ checkout RPS.

### ‚ùå –û—à–∏–±–∫–∞ #3: –ó–∞–±—ã–ª–∏ –ø—Ä–æ retry amplification

–ü–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—å –ø–æ–ª—É—á–∏–ª timeout ‚Üí retry ‚Üí –µ—â—ë retry ‚Üí ...

**1 –±–∏–∑–Ω–µ—Å-–æ–ø–µ—Ä–∞—Ü–∏—è = 3-5 —Ç–µ—Ö–Ω–∏—á–µ—Å–∫–∏—Ö –∑–∞–ø—Ä–æ—Å–æ–≤!**

**–†–µ—à–µ–Ω–∏–µ:** –£—á–∏—Ç—ã–≤–∞–π—Ç–µ retry –≤ —Ä–∞—Å—á–µ—Ç–∞—Ö (—É–º–Ω–æ–∂–∞–π—Ç–µ –Ω–∞ 1.5-2x).

### ‚ùå –û—à–∏–±–∫–∞ #4: –ù–µ —É—á–ª–∏ —Ä–æ—Å—Ç

–†–∞—Å—á–µ—Ç —Ç–æ–ª—å–∫–æ –Ω–∞ —Å–µ–≥–æ–¥–Ω—è, –Ω–æ —á–µ—Ä–µ–∑ –≥–æ–¥ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª–µ–π –≤ 10 —Ä–∞–∑ –±–æ–ª—å—à–µ!

**–†–µ—à–µ–Ω–∏–µ:** Growth forecast (1 –≥–æ–¥, 3 –≥–æ–¥–∞).

---

## –ö–∞–∫ –ø—Ä–∏–º–µ–Ω—è—Ç—å –Ω–∞ –°1

### –®–∞–≥ 1: –û–ø—Ä–µ–¥–µ–ª–∏—Ç—å –ø–∞—Ä–∞–º–µ—Ç—Ä—ã

–ò–∑ –æ–ø–∏—Å–∞–Ω–∏—è –∫–µ–π—Å–∞ –≤—ã–ø–∏—Å–∞—Ç—å:
- [ ] DAU (–∏–ª–∏ MAU ‚Üí –∫–æ–Ω–≤–µ—Ä—Ç–∏—Ä–æ–≤–∞—Ç—å –≤ DAU)
- [ ] Requests per user per day
- [ ] –ü–∏–∫–æ–≤—ã–π —Å—Ü–µ–Ω–∞—Ä–∏–π (–∫–æ–≥–¥–∞?)
- [ ] Peak coefficient (–≤–æ —Å–∫–æ–ª—å–∫–æ —Ä–∞–∑ –≤—ã—à–µ —Å—Ä–µ–¥–Ω–µ–≥–æ?)
- [ ] Peak hours (—Å–∫–æ–ª—å–∫–æ –¥–ª–∏—Ç—Å—è –ø–∏–∫?)

### –®–∞–≥ 2: –ü—Ä–∏–º–µ–Ω–∏—Ç—å —Ñ–æ—Ä–º—É–ª—É

```
Peak RPS = (DAU √ó Req/user √ó Peak_coef) / (Peak_hours √ó 3600)
```

### –®–∞–≥ 3: –†–∞–∑–±–∏—Ç—å –ø–æ —Ç–∏–ø–∞–º (–µ—Å–ª–∏ –µ—Å—Ç—å)

–ï—Å–ª–∏ —Ä–∞–∑–Ω—ã–µ —Ç–∏–ø—ã –æ–ø–µ—Ä–∞—Ü–∏–π (browse vs checkout, read vs write):
- –ü–æ—Å—á–∏—Ç–∞—Ç—å % –¥–ª—è –∫–∞–∂–¥–æ–≥–æ —Ç–∏–ø–∞
- –ü–æ—Å—á–∏—Ç–∞—Ç—å RPS –¥–ª—è –∫–∞–∂–¥–æ–≥–æ —Ç–∏–ø–∞ –æ—Ç–¥–µ–ª—å–Ω–æ

### –®–∞–≥ 4: –ü—Ä–æ–≤–µ—Ä–∏—Ç—å –∑–¥—Ä–∞–≤—ã–π —Å–º—ã—Å–ª

- –ë–∞–Ω–∫ 50K users ‚Üí 52 RPS ‚úÖ (–Ω–∏–∑–∫–∏–π, –Ω–æ —Ä–µ–∞–ª–∏—Å—Ç–∏—á–Ω–æ)
- –°—Ç–∞—Ä—Ç–∞–ø 100 users ‚Üí 10K RPS ‚ùå (—á—Ç–æ-—Ç–æ –Ω–µ —Ç–∞–∫!)

### –®–∞–≥ 5: –î–æ–±–∞–≤–∏—Ç—å –∑–∞–ø–∞—Å (margin)

–ü—Ä–∞–∫—Ç–∏–∫–∞: —Ä–∞—Å—á–µ—Ç–Ω—ã–π Peak RPS √ó 1.5-2x = capacity planning

–ü—Ä–∏–º–µ—Ä: 14K RPS —Ä–∞—Å—á–µ—Ç–Ω—ã–π ‚Üí –ø–ª–∞–Ω–∏—Ä—É–µ–º 20-25K RPS capacity

---

## –†–µ–∑—é–º–µ

### –§–æ—Ä–º—É–ª–∞ (–∑–∞–ø–æ–º–Ω–∏—Ç–µ!):
```
Peak RPS = (DAU √ó Req/user √ó Peak_coef) / (Peak_hours √ó 3600)
```

### –ß—Ç–æ —É—á–µ—Å—Ç—å:
1. ‚úÖ Peak coefficient (2-10x –æ–±—ã—á–Ω–æ)
2. ‚úÖ –†–∞–∑–Ω—ã–µ —Ç–∏–ø—ã –æ–ø–µ—Ä–∞—Ü–∏–π (browse vs checkout)
3. ‚úÖ Retry amplification (√ó1.5-2)
4. ‚úÖ Growth forecast (–ø–ª–∞–Ω–∏—Ä—É–π—Ç–µ —Ä–æ—Å—Ç)
5. ‚úÖ Margin (capacity planning = —Ä–∞—Å—á–µ—Ç √ó 1.5-2)

### –¢–∏–ø–∏—á–Ω—ã–µ –∑–Ω–∞—á–µ–Ω–∏—è:
- **Low:** < 1K RPS (–Ω–æ –º–æ–∂–µ—Ç –±—ã—Ç—å –∫—Ä–∏—Ç–∏—á–Ω–æ –ø–æ NFR!)
- **Medium:** 1K-10K RPS
- **High:** 10K-100K RPS
- **Very High:** 100K+ RPS


