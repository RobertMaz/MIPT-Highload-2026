# Атрибуты качества + Работа с требованиями

> Материалы для подготовки к лекции №3 и семинару №1

---

## Reading List

Прочитать до лекции.

### Блок 1: Функциональные требования(ФТ\FR) и Нефункциональные требования(НФТ\NFR)

| # | Что читать                                                                                                                | Время  | Зачем                                                                                   |
|---|---------------------------------------------------------------------------------------------------------------------------|--------|-----------------------------------------------------------------------------------------|
| 1 | [SLI, SLO, SLA — Google SRE Book, Ch.4](https://sre.google/sre-book/service-level-objectives/)                            | 15 мин | Как формулировать требования к надёжности измеримо, а не "система должна быть быстрой"  |
| 2 | [Как нефункциональные требования влияют на архитектуру — Хабр/МТС](https://habr.com/ru/companies/ru_mts/articles/794232/) | 10 мин | Наглядная эволюция архитектуры: от простой схемы к микросервисам по мере добавления НФТ |

### Блок 2: Масштабирование

| # | Что читать                                                                         | Время  | Зачем                                                                                                  |
|---|------------------------------------------------------------------------------------|--------|--------------------------------------------------------------------------------------------------------|
| 3 | [MonolithFirst — Martin Fowler](https://martinfowler.com/bliki/MonolithFirst.html) | 7 мин  | Почему начинать с микросервисов — почти всегда ошибка                                                  |
| 4 | [The Twelve-Factor App](https://12factor.net/ru/)                                  | 10 мин | 12 принципов, которые делают приложение готовым к масштабированию (особенно VI: Processes — stateless) |

### Блок 3: Распределённые системы

| # | Что читать                                                                                                           | Время | Зачем                                                                                               |
|---|----------------------------------------------------------------------------------------------------------------------|-------|-----------------------------------------------------------------------------------------------------|
| 5 | [8 Fallacies of Distributed Computing — Wikipedia](https://en.wikipedia.org/wiki/Fallacies_of_distributed_computing) | 5 мин | 8 ошибочных предположений о сети, которые ломают распределённые системы                             |
| 6 | [Circuit Breaker — Martin Fowler](https://martinfowler.com/bliki/CircuitBreaker.html)                                | 7 мин | Паттерн предотвращения каскадных отказов: как не положить всю систему из-за одного упавшего сервиса |

---

## Анализ архитектурной значимости

НФТ архитектурно-значимое, если 2 из 3 критериев = High:

| Критерий            | High                                   | Medium                    | Low                  |
|---------------------|----------------------------------------|---------------------------|----------------------|
| Impact на структуру | Меняет фундамент (репликация, шардинг) | Меняет компоненты         | Конфигурация         |
| Cost of change      | Нельзя добавить потом                  | Дорого рефакторить        | Можно добавить позже |
| Business risk       | Потеря лицензии / бизнеса              | Потеря клиентов / revenue | Жалобы               |

Пример: Availability 99.95% для банка — Impact High, Cost High, Risk High → 3/3, архитектурный приоритет.

---

## Формула Peak RPS

```
Peak RPS = (DAU x Requests_per_user x Peak_coefficient) / (Peak_hours x 3600)
```

Пример: банк, день зарплаты — `(50K x 5 x 3) / (4 x 3600) = 52 RPS`

---

## Подготовка к семинару 1

Вы получите неполное описание реальной highload-системы. Задачи:

1. Описать ключевые ФТ/НФТ
2. Сформулировать НФТ измеримо — в формате `SLI + оператор + SLO + условия`
3. Оценить архитектурную значимость к каждому НФТ
4. Рассчитать Peak RPS — по формуле выше
5. Найти недостающие требования — что забыли? какие вопросы задать заказчику?

Шаблон: [Requirements Template](Requirements-Template.md)

---

## Дополнительные материалы

По желанию:

- [ATAM — SEI](https://www.sei.cmu.edu/documents/629/2000_005_001_13706.pdf) — полноценный метод анализа архитектурных trade-offs
- [Capacity Planning for Web Apps — Kir Shatrov](https://kirshatrov.com/posts/capacity-planning-for-web-apps/) — практический подход к
  capacity planning
- [CAP Theorem — Wikipedia](https://en.wikipedia.org/wiki/CAP_theorem) — trade-offs распределённых систем (подробно на L8)
